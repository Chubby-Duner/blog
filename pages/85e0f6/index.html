<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>hooks | å°èƒ–å¢©er</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="webå‰ç«¯æŠ€æœ¯åšå®¢,ç®€æ´è‡³ä¸Š,ä¸“æ³¨webå‰ç«¯å­¦ä¹ ä¸æ€»ç»“ã€‚JavaScript,js,ES6,vue,css3,html5,git,githubç­‰æŠ€æœ¯æ–‡ç« ã€‚">
    <meta name="keywords" content="å‰ç«¯åšå®¢,ä¸ªäººæŠ€æœ¯åšå®¢,å‰ç«¯,å‰ç«¯å¼€å‘,å‰ç«¯æ¡†æ¶,webå‰ç«¯,å‰ç«¯é¢è¯•é¢˜,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,é¢è¯•,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/blog/assets/css/0.styles.c5c3bc51.css" as="style"><link rel="preload" href="/blog/assets/js/app.7c85cea3.js" as="script"><link rel="preload" href="/blog/assets/js/2.72fc9297.js" as="script"><link rel="preload" href="/blog/assets/js/3.08858e57.js" as="script"><link rel="preload" href="/blog/assets/js/83.f102a97f.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.0cd31b2b.js"><link rel="prefetch" href="/blog/assets/js/11.6bf72c46.js"><link rel="prefetch" href="/blog/assets/js/12.bf812b37.js"><link rel="prefetch" href="/blog/assets/js/13.e02dad32.js"><link rel="prefetch" href="/blog/assets/js/14.c7d7e3fe.js"><link rel="prefetch" href="/blog/assets/js/15.2c92b64b.js"><link rel="prefetch" href="/blog/assets/js/16.cb1d53a8.js"><link rel="prefetch" href="/blog/assets/js/17.e0194879.js"><link rel="prefetch" href="/blog/assets/js/18.2cc512ab.js"><link rel="prefetch" href="/blog/assets/js/19.74b38944.js"><link rel="prefetch" href="/blog/assets/js/20.cebb36b4.js"><link rel="prefetch" href="/blog/assets/js/21.7971b6ef.js"><link rel="prefetch" href="/blog/assets/js/22.6c7de215.js"><link rel="prefetch" href="/blog/assets/js/23.37ad8dda.js"><link rel="prefetch" href="/blog/assets/js/24.e8aa2ebe.js"><link rel="prefetch" href="/blog/assets/js/25.5d9a5b0e.js"><link rel="prefetch" href="/blog/assets/js/26.b2211ba7.js"><link rel="prefetch" href="/blog/assets/js/27.4566b763.js"><link rel="prefetch" href="/blog/assets/js/28.4efc733c.js"><link rel="prefetch" href="/blog/assets/js/29.44b7dca0.js"><link rel="prefetch" href="/blog/assets/js/30.716ce82c.js"><link rel="prefetch" href="/blog/assets/js/31.a90d4492.js"><link rel="prefetch" href="/blog/assets/js/32.1af5e69a.js"><link rel="prefetch" href="/blog/assets/js/33.4af527c6.js"><link rel="prefetch" href="/blog/assets/js/34.957418cc.js"><link rel="prefetch" href="/blog/assets/js/35.432ad446.js"><link rel="prefetch" href="/blog/assets/js/36.080aebb0.js"><link rel="prefetch" href="/blog/assets/js/37.9bdeb109.js"><link rel="prefetch" href="/blog/assets/js/38.9c3ea366.js"><link rel="prefetch" href="/blog/assets/js/39.1c3d5313.js"><link rel="prefetch" href="/blog/assets/js/4.b9a3bdba.js"><link rel="prefetch" href="/blog/assets/js/40.9d04909f.js"><link rel="prefetch" href="/blog/assets/js/41.4914585e.js"><link rel="prefetch" href="/blog/assets/js/42.c3c1fcdd.js"><link rel="prefetch" href="/blog/assets/js/43.2a2e2e72.js"><link rel="prefetch" href="/blog/assets/js/44.e37d9840.js"><link rel="prefetch" href="/blog/assets/js/45.f0283baa.js"><link rel="prefetch" href="/blog/assets/js/46.0b1122fb.js"><link rel="prefetch" href="/blog/assets/js/47.63284cc4.js"><link rel="prefetch" href="/blog/assets/js/48.ad3e5b49.js"><link rel="prefetch" href="/blog/assets/js/49.82191078.js"><link rel="prefetch" href="/blog/assets/js/5.a22d3437.js"><link rel="prefetch" href="/blog/assets/js/50.edbd5e77.js"><link rel="prefetch" href="/blog/assets/js/51.d7f6cd09.js"><link rel="prefetch" href="/blog/assets/js/52.b80228c6.js"><link rel="prefetch" href="/blog/assets/js/53.04904ab5.js"><link rel="prefetch" href="/blog/assets/js/54.7c040398.js"><link rel="prefetch" href="/blog/assets/js/55.eefd40ba.js"><link rel="prefetch" href="/blog/assets/js/56.edadc4b5.js"><link rel="prefetch" href="/blog/assets/js/57.c13c2968.js"><link rel="prefetch" href="/blog/assets/js/58.316708a1.js"><link rel="prefetch" href="/blog/assets/js/59.d4d9aaec.js"><link rel="prefetch" href="/blog/assets/js/6.ed876c55.js"><link rel="prefetch" href="/blog/assets/js/60.b04a8deb.js"><link rel="prefetch" href="/blog/assets/js/61.f1b7dc74.js"><link rel="prefetch" href="/blog/assets/js/62.fdcaef18.js"><link rel="prefetch" href="/blog/assets/js/63.f24c656b.js"><link rel="prefetch" href="/blog/assets/js/64.6a2fd1a0.js"><link rel="prefetch" href="/blog/assets/js/65.9698f04a.js"><link rel="prefetch" href="/blog/assets/js/66.9a06c05e.js"><link rel="prefetch" href="/blog/assets/js/67.9752c0c7.js"><link rel="prefetch" href="/blog/assets/js/68.32d75a17.js"><link rel="prefetch" href="/blog/assets/js/69.e023fd4c.js"><link rel="prefetch" href="/blog/assets/js/7.5e73a7b8.js"><link rel="prefetch" href="/blog/assets/js/70.dec779df.js"><link rel="prefetch" href="/blog/assets/js/71.0e2cd101.js"><link rel="prefetch" href="/blog/assets/js/72.c99fd9fd.js"><link rel="prefetch" href="/blog/assets/js/73.6c366aa4.js"><link rel="prefetch" href="/blog/assets/js/74.f67432ae.js"><link rel="prefetch" href="/blog/assets/js/75.61095e8c.js"><link rel="prefetch" href="/blog/assets/js/76.cf23856d.js"><link rel="prefetch" href="/blog/assets/js/77.5339a35a.js"><link rel="prefetch" href="/blog/assets/js/78.9787a0fc.js"><link rel="prefetch" href="/blog/assets/js/79.3b9975b6.js"><link rel="prefetch" href="/blog/assets/js/8.3b10103b.js"><link rel="prefetch" href="/blog/assets/js/80.775a5928.js"><link rel="prefetch" href="/blog/assets/js/81.5f59a65b.js"><link rel="prefetch" href="/blog/assets/js/82.c361314b.js"><link rel="prefetch" href="/blog/assets/js/84.d8de6b0b.js"><link rel="prefetch" href="/blog/assets/js/85.4a776a28.js"><link rel="prefetch" href="/blog/assets/js/86.40dce7a0.js"><link rel="prefetch" href="/blog/assets/js/87.ee215c30.js"><link rel="prefetch" href="/blog/assets/js/88.e4ada929.js"><link rel="prefetch" href="/blog/assets/js/89.451583ad.js"><link rel="prefetch" href="/blog/assets/js/9.4f2942b2.js"><link rel="prefetch" href="/blog/assets/js/90.a817f81f.js"><link rel="prefetch" href="/blog/assets/js/91.3ad3f8d9.js"><link rel="prefetch" href="/blog/assets/js/92.0536c75c.js"><link rel="prefetch" href="/blog/assets/js/93.37cebf1a.js"><link rel="prefetch" href="/blog/assets/js/94.905c9de2.js"><link rel="prefetch" href="/blog/assets/js/95.ea81bd53.js"><link rel="prefetch" href="/blog/assets/js/96.554a772a.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.c5c3bc51.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/new1/fav.png" alt="å°èƒ–å¢©er" class="logo"> <span class="site-name can-hide">å°èƒ–å¢©er</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ³å‰ç«¯" class="dropdown-title"><a href="/blog/web/" class="link-title">ğŸ³å‰ç«¯</a> <span class="title" style="display:none;">ğŸ³å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å‰ç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/67e8a9/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/blog/pages/bcf114/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/blog/pages/08c1d7/" class="nav-link">ES6</a></li><li class="dropdown-subitem"><a href="/blog/pages/4003da/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ¬æ¡†æ¶" class="dropdown-title"><a href="/blog/frame/" class="link-title">ğŸ¬æ¡†æ¶</a> <span class="title" style="display:none;">ğŸ¬æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/note/react/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒé¡µé¢" class="dropdown-title"><a href="/blog/ui/" class="link-title">ğŸŒé¡µé¢</a> <span class="title" style="display:none;">ğŸŒé¡µé¢</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/d1b925/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/75a695/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ•¹ï¸æŠ€æœ¯" class="dropdown-title"><a href="/blog/technology/" class="link-title">ğŸ•¹ï¸æŠ€æœ¯</a> <span class="title" style="display:none;">ğŸ•¹ï¸æŠ€æœ¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/163522/" class="nav-link">å·¥å…·ç±»</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“Œæ›´å¤š" class="dropdown-title"><a href="/blog/more/" class="link-title">ğŸ“Œæ›´å¤š</a> <span class="title" style="display:none;">ğŸ“Œæ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/friends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">ğŸ’–å…³äº</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">ğŸ’»æ”¶è—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ‘£ç´¢å¼•" class="dropdown-title"><a href="/blog/archives/" class="link-title">ğŸ‘£ç´¢å¼•</a> <span class="title" style="display:none;">ğŸ‘£ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/Chubby-Duner/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Chubby-Duner/image-hosting@master/blog/logo.jpeg"> <div class="blogger-info"><h3>å°èƒ–å¢©er</h3> <span>Better later than never.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ³å‰ç«¯" class="dropdown-title"><a href="/blog/web/" class="link-title">ğŸ³å‰ç«¯</a> <span class="title" style="display:none;">ğŸ³å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å‰ç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/67e8a9/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/blog/pages/bcf114/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/blog/pages/08c1d7/" class="nav-link">ES6</a></li><li class="dropdown-subitem"><a href="/blog/pages/4003da/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ¬æ¡†æ¶" class="dropdown-title"><a href="/blog/frame/" class="link-title">ğŸ¬æ¡†æ¶</a> <span class="title" style="display:none;">ğŸ¬æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/note/react/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒé¡µé¢" class="dropdown-title"><a href="/blog/ui/" class="link-title">ğŸŒé¡µé¢</a> <span class="title" style="display:none;">ğŸŒé¡µé¢</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/d1b925/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/75a695/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ•¹ï¸æŠ€æœ¯" class="dropdown-title"><a href="/blog/technology/" class="link-title">ğŸ•¹ï¸æŠ€æœ¯</a> <span class="title" style="display:none;">ğŸ•¹ï¸æŠ€æœ¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/163522/" class="nav-link">å·¥å…·ç±»</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“Œæ›´å¤š" class="dropdown-title"><a href="/blog/more/" class="link-title">ğŸ“Œæ›´å¤š</a> <span class="title" style="display:none;">ğŸ“Œæ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/friends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">ğŸ’–å…³äº</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">ğŸ’»æ”¶è—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ‘£ç´¢å¼•" class="dropdown-title"><a href="/blog/archives/" class="link-title">ğŸ‘£ç´¢å¼•</a> <span class="title" style="display:none;">ğŸ‘£ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/Chubby-Duner/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åŸºæœ¬çŸ¥è¯†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Hooks</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/85e0f6/" aria-current="page" class="active sidebar-link">hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#å½“ä½ ä½¿ç”¨äº†hooks-ä¾‹å¦‚-usestate-æ—¶-å‘ç”Ÿäº†ä»€ä¹ˆ" class="sidebar-link">å½“ä½ ä½¿ç”¨äº†hooksï¼ˆ ä¾‹å¦‚ useStateï¼‰æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#é‚£è°ƒåº¦å‘˜-dispatcher-åˆæ˜¯ä»€ä¹ˆ" class="sidebar-link">é‚£è°ƒåº¦å‘˜ dispatcher åˆæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#ä¸€-ä»€ä¹ˆæ˜¯é’©å­-hooks" class="sidebar-link">ä¸€ï¼šä»€ä¹ˆæ˜¯é’©å­ï¼ˆhooksï¼‰</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#äºŒ-hooksçš„æœ¬è´¨" class="sidebar-link">äºŒï¼šHooksçš„æœ¬è´¨</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#ä¸‰-reactä¸ºä»€ä¹ˆè¦åˆ›é€ hooksè¿™ä¸ªæ¦‚å¿µå‘¢" class="sidebar-link">ä¸‰ï¼šReactä¸ºä»€ä¹ˆè¦åˆ›é€ Hooksè¿™ä¸ªæ¦‚å¿µå‘¢ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#å››-hooksæ¨ªç©ºå‡ºä¸–" class="sidebar-link">å››ï¼šHooksæ¨ªç©ºå‡ºä¸–</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#äº”-hooksä»£è¡¨äº†reactæ¶æ„çš„ä¸€æ¬¡é‡å¤§å˜é©" class="sidebar-link">äº”ï¼šHooksä»£è¡¨äº†Reactæ¶æ„çš„ä¸€æ¬¡é‡å¤§å˜é©</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#ä¸€-çŠ¶æ€é’©å­-usestate" class="sidebar-link">ä¸€: çŠ¶æ€é’©å­ï¼šuseState( )  ;</a></li><li class="sidebar-sub-header"><a href="/blog/pages/85e0f6/#ä¸‰-è¿˜æœ‰å“ªäº›è‡ªå¸¦çš„effect-hooks" class="sidebar-link">ä¸‰ï¼šè¿˜æœ‰å“ªäº›è‡ªå¸¦çš„Effect Hooksï¼Ÿ</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React17æ–°ç‰ˆæœ¬æ¦‚å¿µ</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- æ­£æ–¹å½¢ -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-4"><div class="articleInfo-wrap" data-v-70a2d273><div class="articleInfo" data-v-70a2d273><ul class="breadcrumbs" data-v-70a2d273><li data-v-70a2d273><a href="/blog/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-70a2d273></a></li> <li data-v-70a2d273><a href="/blog/note/react/" title="Reactç¬”è®°-ç›®å½•é¡µ" data-v-70a2d273>Reactç¬”è®°</a></li> <li data-v-70a2d273><a href="/blog/note/react/#Hooks" title="Reactç¬”è®°#Hooks" data-v-70a2d273>Hooks</a></li> <!----></ul> <div class="info" data-v-70a2d273><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-70a2d273><a href="https://github.com/Chubby-Duner" target="_blank" title="ä½œè€…" class="beLink" data-v-70a2d273>å°èƒ–å¢©er</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-70a2d273><a href="javascript:;" data-v-70a2d273>2021-09-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          hooks
        </h1> <div class="page-slot page-slot-top"><!-- å›ºå®š100% * 90pxå¯æ˜¾ç¤ºï¼Œmax-height:90pxæœªè§æ˜¾ç¤º-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="react-hooksåŸç†"><a href="#react-hooksåŸç†" class="header-anchor">#</a> React HooksåŸç†</h1> <blockquote><p>ä½œè€…ï¼šåœ¨å‰¥æˆ‘çš„å£³</p> <p>é“¾æ¥ï¼šhttps://juejin.cn/post/6982755396976902158</p></blockquote> <ol><li>å‡½æ•°ç»„ä»¶æ‰§è¡Œå‡½æ•°</li></ol> <ul><li>æ‰§è¡Œå‡½æ•°ç»„ä»¶ renderWithHooks</li> <li>æ”¹å˜ ReactCurrentDispatcher å¯¹è±¡</li></ul> <ol start="2"><li>åˆå§‹åŒ–hooks</li></ol> <ul><li>é€šè¿‡ mountWorkInProgressHook ç”Ÿæˆhooksé“¾è¡¨</li> <li>é€šè¿‡ mountState æ¥åˆå§‹åŒ– useState</li> <li>é€šè¿‡ dispatchAction æ¥æ§åˆ¶æ— çŠ¶æ€ç»„ä»¶çš„æ›´æ–°</li> <li>é€šè¿‡ mountEffect åˆå§‹åŒ– useEffect</li> <li>é€šè¿‡ mountMemo åˆå§‹åŒ– useMemo</li> <li>é€šè¿‡ mountRef åˆå§‹åŒ– useRef</li></ul> <ol start="3"><li>æ›´æ–°hooks</li></ol> <ul><li>é€šè¿‡ updateWorkInProgressHook æ‰¾åˆ°å¯¹åº”çš„ hooks æ›´æ–° hooks é“¾è¡¨</li> <li>é€šè¿‡ updateState å¾—åˆ°æœ€æ–°çš„ state</li> <li>é€šè¿‡ updateEffect æ›´æ–° updateQueue</li> <li>é€šè¿‡ updateMemo åˆ¤æ–­ depsï¼Œè·å–oræ›´æ–°ç¼“å­˜å€¼</li> <li>é€šè¿‡ update è·å– ref å¯¹è±¡</li></ul> <h2 id="å½“ä½ ä½¿ç”¨äº†hooks-ä¾‹å¦‚-usestate-æ—¶-å‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#å½“ä½ ä½¿ç”¨äº†hooks-ä¾‹å¦‚-usestate-æ—¶-å‘ç”Ÿäº†ä»€ä¹ˆ" class="header-anchor">#</a> å½“ä½ ä½¿ç”¨äº†hooksï¼ˆ ä¾‹å¦‚ useStateï¼‰æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2> <p>æˆ‘ä»¬å»çœ‹ <code>useState</code> çš„æºç </p> <p><img src="https://cdn.jsdelivr.net/gh/Chubby-Duner/image-hosting@master/pix-image-hosting/r1.png" alt="r1"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">initialState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>useState <span class="token operator">=</span> useState<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>useState(initialState)</code> ç­‰ä»·äº <code>dispatcher.useState(initialState)</code>ã€‚ <code>dispatcher</code> ä»ä¸­æ–‡æ„æ€ä¸Šæ˜¯ è°ƒåº¦å‘˜ çš„æ„æ€ã€‚ ä¹Ÿå°±æ˜¯è¯´ä½ è°ƒç”¨ <code>useState</code> çš„æ—¶å€™åªæ˜¯é€šçŸ¥äº†è°ƒåº¦å‘˜å»è°ƒåº¦çœŸæ­£çš„ <code>useState</code>ã€‚</p> <h2 id="é‚£è°ƒåº¦å‘˜-dispatcher-åˆæ˜¯ä»€ä¹ˆ"><a href="#é‚£è°ƒåº¦å‘˜-dispatcher-åˆæ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> é‚£è°ƒåº¦å‘˜ dispatcher åˆæ˜¯ä»€ä¹ˆï¼Ÿ</h2> <p>ä¸Šæºç ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> ReactCurrentDispatcher<span class="token punctuation">.</span>current<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>dispatcher <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span> <span class="token string">&quot;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> dispatcher<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//  ReactCurrentDispatcheræ˜¯ä¸€ä¸ªå¯¹è±¡</span>

<span class="token comment">/**
   * Keeps track of the current dispatcher.
   */</span>
<span class="token keyword">var</span> ReactCurrentDispatcher <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
     * @internal
     * @type {ReactComponent}
     */</span>
  current<span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><code>dispatcher</code> æ˜¯ä» <code>ReactCurrentDispatcher</code> èº«ä¸Šæ¥ã€‚æˆ‘ä»¬æ¥æŠŠè¿™ä¸ªæ­¤åˆ†æä¸€ä¸‹ï¼Œreact å½“å‰çš„ï¼ˆcurrentï¼‰è°ƒåº¦å‘˜ï¼ˆDispatcherï¼‰ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ°è¿™é‡Œ <code>Dispatcher</code> å°±å·²ç»å®‰æ’å¥½äº†ã€‚</p> <h1 id="é’©å­hooksæ¦‚å¿µ"><a href="#é’©å­hooksæ¦‚å¿µ" class="header-anchor">#</a> é’©å­hooksæ¦‚å¿µ</h1> <blockquote><p>ä½œè€…ï¼šå°èƒ–å¢©er</p></blockquote> <p>å‡½æ•°å¼ç»„ä»¶çš„æ–¹æ³•é‡Œé¢æ˜¯æ²¡æœ‰thisçš„</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token comment">// 1ã€åˆ›å»ºå‡½æ•°å¼ç»„ä»¶</span>
<span class="token keyword">function</span> <span class="token function">DemoCompoent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined  å› ä¸ºbabelç¼–è¯‘åå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token function">æˆ‘æ˜¯å‡½æ•°å¼ç»„ä»¶</span><span class="token punctuation">(</span>é€‚ç”¨äºã€ç®€å•çš„ç»„ä»¶ã€‘å®šå®šä¹‰<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2ã€æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>DemoCompoent<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
  æ‰§è¡Œ ReactDOM.render ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
  React è§£æç»„ä»¶æ ‡ç­¾ï¼Œæ‰¾åˆ°äº† DemoCompoent ç»„ä»¶ï¼›
  å‘ç°ç»„ä»¶æ˜¯ä½¿ç”¨å‡½æ•°å¼å®šä¹‰çš„ï¼Œéšåè°ƒç”¨è¯¥å‡½æ•°ï¼Œå°†è¿”å›çš„è™šæ‹Ÿ DOM è½¬æ¢æˆçœŸå® DOMï¼Œ éšåå‘ˆç°åœ¨é¡µé¢ä¸­ã€‚
*/</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å‡½æ•°å¼ç»„ä»¶çš„åŸºç¡€hooksï¼ˆä¸ºäº†åœ¨ä¸ä½¿ç”¨ç±»ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨stateä¸Reactå…¶å®ƒç›¸å…³æ“ä½œï¼‰</p> <h2 id="ä¸€-ä»€ä¹ˆæ˜¯é’©å­-hooks"><a href="#ä¸€-ä»€ä¹ˆæ˜¯é’©å­-hooks" class="header-anchor">#</a> ä¸€ï¼šä»€ä¹ˆæ˜¯é’©å­ï¼ˆhooksï¼‰</h2> <ol><li>æ¶ˆæ¯å¤„ç†çš„ä¸€ç§æ–¹æ³•ï¼Œç”¨æ¥ç›‘è§†æŒ‡å®šç¨‹åºï¼›</li> <li>å‡½æ•°ç»„ä»¶ä¸­éœ€è¦å¤„ç†å‰¯ä½œç”¨ï¼Œå¯ä»¥ç”¨é’©å­æŠŠå¤–éƒ¨ä»£ç é’©è¿›æ¥</li> <li>å¸¸ç”¨é’©å­ï¼šuseStateï¼ŒuseEffectï¼ŒuseContextï¼ŒuseReducer</li> <li>hooksä¸€å¾‹ä½¿ç”¨useå‰ç¼€å‘½åï¼šuseXxx</li></ol> <h2 id="äºŒ-hooksçš„æœ¬è´¨"><a href="#äºŒ-hooksçš„æœ¬è´¨" class="header-anchor">#</a> äºŒï¼šHooksçš„æœ¬è´¨</h2> <p>ä¸€ç±»ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸ºä½ çš„å‡½æ•°å¼ç»„ä»¶ï¼ˆfunction componentï¼‰æ³¨å…¥äº†ç‰¹æ®Šçš„åŠŸèƒ½</p> <h2 id="ä¸‰-reactä¸ºä»€ä¹ˆè¦åˆ›é€ hooksè¿™ä¸ªæ¦‚å¿µå‘¢"><a href="#ä¸‰-reactä¸ºä»€ä¹ˆè¦åˆ›é€ hooksè¿™ä¸ªæ¦‚å¿µå‘¢" class="header-anchor">#</a> ä¸‰ï¼šReactä¸ºä»€ä¹ˆè¦åˆ›é€ Hooksè¿™ä¸ªæ¦‚å¿µå‘¢ï¼Ÿ</h2> <p><code>æ¦‚å¿µï¼š</code>æˆ‘ä»¬éƒ½çŸ¥é“Reactçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç»„ä»¶åŒ–ï¼ˆç»„ä»¶åŒ–çš„æœ€å¤§å¥½å¤„ï¼šå½¼æ­¤ç‹¬ç«‹ï¼Œå¯ä»¥å¤ç”¨ï¼‰
1ã€æœ‰äº›ç±»ç»„ä»¶å†—é•¿è€Œä¸”å¤æ‚ï¼Œéš¾ä»¥å¤ç”¨
<code>è§£å†³æ–¹æ¡ˆï¼š</code>æ— çŠ¶æ€ç»„ä»¶ä¸HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰,ä½†è¿˜æ˜¯å­˜åœ¨è¯¸å¤šé—®é¢˜</p> <p>(1) æ— çŠ¶æ€ç»„ä»¶å­—é¢æ„æ€å°±æ˜¯æ²¡æœ‰stateï¼Œå½“ç»„ä»¶æ²¡æœ‰äº†çŠ¶æ€stateï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¼šå˜å¾—éå¸¸ç®€å•ï¼Œæ‰€æœ‰çš„é¡µé¢ä»…ä»…ä¾èµ–äºpropsçš„æ³¨å…¥ï¼Œä½†æ˜¯æ— çŠ¶æ€ç»„ä»¶æœ€è‡´å‘½çš„æ˜¯å®ƒæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œè®¿é—®ä¸äº†apiï¼Œè¿›è¡Œä¸äº†å¼‚æ­¥çš„æ•°æ®æ›´æ–°ã€‚</p> <p>(2) é«˜é˜¶ç»„ä»¶åˆ™èµ°å‘äº†å¦å¤–ä¸€ç§æç«¯ï¼Œå®ƒä¸ç®¡ä½ åŸå…ˆçš„ç»„ä»¶æœ‰å¤šä¹ˆçš„å¤æ‚ï¼Œå®ƒä¼šç›´æ¥åœ¨ç»„ä»¶å¤–å†å¥—ä¸€å±‚ç»„ä»¶ï¼Œé€šè¿‡ç»„ä»¶ä¸€å±‚ä¸€å±‚çš„åµŒå¥—ï¼Œæ¥è¾¾åˆ°ç»„ä»¶å¤ç”¨çš„ç›®çš„ï¼Œè¿™ç§æ–¹æ³•çš„ç¡®è§£å†³äº†å¤æ‚ç»„ä»¶çš„å¤ç”¨é—®é¢˜ï¼Œä½†æ˜¯æ›´åŠ åŠ æ·±äº†ç»„ä»¶çš„å¤æ‚æ€§ï¼Œè¿˜ä¼šå‡ºç°ç±»ä¼¼å›è°ƒåœ°ç‹±çš„domç»“æ„</p> <h2 id="å››-hooksæ¨ªç©ºå‡ºä¸–"><a href="#å››-hooksæ¨ªç©ºå‡ºä¸–" class="header-anchor">#</a> å››ï¼šHooksæ¨ªç©ºå‡ºä¸–</h2> <p>æ¦‚å¿µ:</p> <ol><li>Hooksç›®çš„å°±æ˜¯ä¸ºäº†ç»™å‡½æ•°å¼ç»„ä»¶åŠ ä¸ŠçŠ¶æ€</li> <li>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šåŒæ—¶å¤„ç†å¤šé¡¹ä»»åŠ¡ï¼Œå‘èµ·ajaxã€è·Ÿè¸ªæ•°æ®çŠ¶æ€ã€ç»‘å®šäº‹ä»¶ç›‘å¬ã€ç»‘å®šäº‹ä»¶ç›‘å¬</li> <li>å‡½æ•°å¼ç»„ä»¶åˆ™è½»é‡åŒ–å¾ˆå¤šï¼Œä½¿ç”¨Hooksé’©å­æ¥é’©å…¥ç»„ä»¶çš„çŠ¶æ€</li></ol> <h2 id="äº”-hooksä»£è¡¨äº†reactæ¶æ„çš„ä¸€æ¬¡é‡å¤§å˜é©"><a href="#äº”-hooksä»£è¡¨äº†reactæ¶æ„çš„ä¸€æ¬¡é‡å¤§å˜é©" class="header-anchor">#</a> äº”ï¼šHooksä»£è¡¨äº†Reactæ¶æ„çš„ä¸€æ¬¡é‡å¤§å˜é©</h2> <ol><li>æˆ‘ä»¬ä¸å†éœ€è¦ç±»ç»„ä»¶äº†</li> <li>ä¸ä¼šå†æœ‰thisï¼Œä¸ä¼šå†æœ‰bindingã€ç”šè‡³æœ‰å¯èƒ½å–ä»£redux</li> <li>ç®€åŒ–äº†ä»£ç ã€å‡å°‘äº†æ¨¡æ¿ï¼Œé™ä½äº†å­¦ä¹ çš„éš¾åº¦</li></ol> <h1 id="å¸¸è§çš„hooks"><a href="#å¸¸è§çš„hooks" class="header-anchor">#</a> å¸¸è§çš„hooks</h1> <blockquote><p>ä½œè€…ï¼šå°èƒ–å¢©er</p></blockquote> <h2 id="ä¸€-çŠ¶æ€é’©å­-usestate"><a href="#ä¸€-çŠ¶æ€é’©å­-usestate" class="header-anchor">#</a> ä¸€: çŠ¶æ€é’©å­ï¼šuseState( )  ;</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>count <span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>Reactè‡ªå¸¦çš„ä¸€ä¸ªhookå‡½æ•°ï¼Œå£°æ˜ç»„ä»¶çŠ¶æ€ï¼›</li> <li>å‚æ•°å¯ä»¥è®¾ç½®stateçš„åˆå§‹å€¼ï¼ˆinitial stateï¼‰</li> <li>è¿”å›å€¼æ˜¯ä¸€ä¸ªåªæœ‰ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š[ çŠ¶æ€ ï¼Œ çŠ¶æ€æ›´æ–°å‡½æ•°]</li></ul> <p>å…¶æ¬¡ï¼ŒuseStateæ˜¯å¯ä»¥å¤šæ¬¡è°ƒç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥è¿™æ ·å†™ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ExampleWithManyStates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
    <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">,</span> setAge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">const</span> <span class="token punctuation">[</span>fruit<span class="token punctuation">,</span> setFruit<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> setTodos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'Learn Hooks'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol><li>åˆå§‹å€¼æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯string/number/booleanè¿™ç§ç®€å•æ•°æ®ç±»å‹ï¼Œå®ƒå®Œå…¨å¯ä»¥æ¥æ”¶å¯¹è±¡æˆ–è€…æ•°ç»„ä½œä¸ºå‚æ•°ã€‚</li> <li>useStateæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œç›¸äº’ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚</li></ol> <p>ä¾‹å­</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ç±»ä¼¼äºcomponentDidMount å’Œ componentDidUpdate:</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ›´æ–°æ–‡æ¡£çš„æ ‡é¢˜</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>æˆ‘ä»¬å¯¹æ¯”ç€çœ‹ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰hooksï¼Œæˆ‘ä»¬ä¼šæ€ä¹ˆå†™ï¼Ÿ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç»„ä»¶æŒ‚è½½å®Œæ¯•</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç»„ä»¶æ›´æ–°å®Œæ¯•</span>
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          Click me
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>æˆ‘ä»¬å†™çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œé€šå¸¸ä¼šäº§ç”Ÿå¾ˆå¤šçš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œæ¯”å¦‚å‘èµ·ajaxè¯·æ±‚è·å–æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç›‘å¬çš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ‰‹åŠ¨ä¿®æ”¹domç­‰ç­‰ã€‚æˆ‘ä»¬ä¹‹å‰éƒ½æŠŠè¿™äº›å‰¯ä½œç”¨çš„å‡½æ•°å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­é‡Œï¼Œæ¯”å¦‚componentDidMountï¼ŒcomponentDidUpdateå’ŒcomponentWillUnmountã€‚è€Œç°åœ¨çš„useEffectå°±ç›¸å½“ä¸è¿™äº›å£°æ˜å‘¨æœŸå‡½æ•°é’©å­çš„é›†åˆä½“ã€‚å®ƒä»¥ä¸€æŠµä¸‰ã€‚</p> <p>ç›¸å¯¹å‰æ–‡æ‰€è¯´hookså¯ä»¥åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œç›¸äº’ç‹¬ç«‹ã€‚æ‰€ä»¥æˆ‘ä»¬åˆç†çš„åšæ³•æ˜¯ï¼Œç»™æ¯ä¸€ä¸ªå‰¯ä½œç”¨ä¸€ä¸ªå•ç‹¬çš„useEffecté’©å­ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™äº›å‰¯ä½œç”¨ä¸å†ä¸€è‚¡è„‘å †åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­é‡Œï¼Œä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ã€‚</p> <p><code>æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°ï¼Ÿ</code>
æˆ‘ä»¬åªéœ€è¦ç»™useEffectä¼ ç¬¬äºŒä¸ªå‚æ•°å³å¯ã€‚ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥å‘Šè¯‰reactåªæœ‰å½“è¿™ä¸ªå‚æ•°çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰æ‰§è¡Œæˆ‘ä»¬ä¼ çš„å‰¯ä½œç”¨å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åªæœ‰å½“countçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ`document.title`è¿™ä¸€å¥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å½“æˆ‘ä»¬ç¬¬äºŒä¸ªå‚æ•°ä¼ ä¸€ä¸ªç©ºæ•°ç»„[]æ—¶ï¼Œå…¶å®å°±ç›¸å½“äºåªåœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯componentDidMountåŠ componentWillUnmountçš„æ¨¡å¼ã€‚ä¸è¿‡è¿™ç§ç”¨æ³•å¯èƒ½å¸¦æ¥bugï¼Œå°‘ç”¨ã€‚</p> <h2 id="ä¸‰-è¿˜æœ‰å“ªäº›è‡ªå¸¦çš„effect-hooks"><a href="#ä¸‰-è¿˜æœ‰å“ªäº›è‡ªå¸¦çš„effect-hooks" class="header-anchor">#</a> ä¸‰ï¼šè¿˜æœ‰å“ªäº›è‡ªå¸¦çš„Effect Hooksï¼Ÿ</h2> <ol><li>useContext  	ç”¨æ¥è·¨ç»„ä»¶çš„æ•°æ®ä¼ é€’</li> <li>useReducer 	ç”¨æ¥ç®¡ç†å…¨å±€çš„çŠ¶æ€</li> <li>useCallback 	ç”¨æ¥å¤„ç†å›è°ƒçš„å‰¯ä½œç”¨</li> <li>useRef                 ç”¨æ¥è¿”å›å¼•ç”¨çš„å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¼•ç”¨å¯¹è±¡åœ¨æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¼šä¿æŒä¸å˜</li> <li>useLayoutEffect	ä¸useEffectéå¸¸ç›¸ä¼¼ï¼Œä¹Ÿç”¨æ¥å¤„ç†å‰¯ä½œç”¨ï¼Œå®ƒä¼šåœ¨æ‰€æœ‰çš„domå…ƒç´ å˜æ›´äº†ä¹‹ååŒæ­¥è°ƒç”¨ï¼Œè¯»å–domå¸ƒå±€ï¼Œå¹¶åŒæ­¥è§¦å‘ï¼Œé‡æ–°æ¸²æŸ“</li> <li>useDebugValue   å¯ä»¥åœ¨Reactå¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰çš„Hooksæ ‡ç­¾æ–¹ä¾¿å¼€å‘</li></ol> <h1 id="å‡½æ•°å¼ç»„ä»¶ä¸ç±»å¼ç»„ä»¶ä¹‹é—´çš„å¯¹æ¯”"><a href="#å‡½æ•°å¼ç»„ä»¶ä¸ç±»å¼ç»„ä»¶ä¹‹é—´çš„å¯¹æ¯”" class="header-anchor">#</a> å‡½æ•°å¼ç»„ä»¶ä¸ç±»å¼ç»„ä»¶ä¹‹é—´çš„å¯¹æ¯”ï¼Ÿ</h1> <p>å…ˆæ¥çœ‹çœ‹ç±»å¼ç»„ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ClassCom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">clickHandel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      count<span class="token operator">:</span> count <span class="token operator">+</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandel<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          Click me
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>   
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ä½¿ç”¨äº†hooksçš„å‡½æ•°å¼ç»„ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">FuncCom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">clickHandel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickHandel<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†hooksï¼Œç»„ä»¶ä¸­æ ¹æœ¬ç”¨ä¸åˆ°thisã€‚å°±å¯ä»¥ä½¿ç”¨çŠ¶æ€(state)ã€‚
å› ä¸ºæˆ‘ä»¬çš„çŠ¶æ€countå°±æ˜¯ä¸€ä¸ªå•çº¯çš„å˜é‡è€Œå·²ï¼Œæˆ‘ä»¬å†ä¹Ÿä¸éœ€è¦å†™æˆ<code>{this.state.count}</code>è¿™æ ·äº†ã€‚</p> <h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h1> <blockquote><p>ä½œè€…ï¼šå°èƒ–å¢©er</p></blockquote> <p><code>åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­, ä½¿ç”¨hooksè¯­æ³•æ¨¡æ‹ŸçŠ¶æ€æ•°æ®çš„æ­¥éª¤</code></p> <ol><li>ä»reactä¸­å¯¼å…¥è¯­æ³•å‡½æ•°setState</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­, ä½¿ç”¨setStateåˆ›å»ºçŠ¶æ€æ•°æ®</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;åå­—&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>åœ¨ç»„ä»¶æ¨¡æ¿ä¸­, ç›´æ¥è°ƒç”¨çŠ¶æ€åå³å¯</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>è‡ªå®šä¹‰çŠ¶æ€name<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{</span>age<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>ä½¿ç”¨setStateå‡½æ•°è¿”å›çš„æ›´æ–°å‡½æ•°ä¿®æ”¹çŠ¶æ€å€¼, å‚æ•°æ˜¯æ–°å€¼,ä¿®æ”¹åè‡ªåŠ¨åˆ·æ–°ç•Œé¢</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>useEffect</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// useEffect() è¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°, ä»–æœ‰ä¸¤ä¸ªå‚æ•°, </span>
<span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°, å½“ç»„ä»¶åˆå§‹åŒ–å®Œæˆå’ŒçŠ¶æ€æ›´æ–°æ—¶è°ƒç”¨</span>
<span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„,å¯é€‰, æ•°ç»„ä¸­æ˜¯çŠ¶æ€å, æŒ‡å®šé‚£äº›çŠ¶æ€å€¼æ›´æ–°ä¼šè§¦å‘å›è°ƒå‡½æ•°</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœä¸åŠ ç¬¬äºŒä¸ªå‚æ•°, åˆå§‹åŒ–æ—¶è°ƒç”¨, ä»»ä½•çŠ¶æ€æ›´æ–°éƒ½ä¼šè°ƒç”¨</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç»„ä»¶åˆå§‹åŒ–,æˆ–æœ‰çŠ¶æ€æ›´æ–°ComponentWillUpdate&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯ç©ºæ•°ç»„, åˆ™åªåœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨,çŠ¶æ€æ›´æ–°æ—¶ä¸ä¼šè°ƒç”¨</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ComponentDidMount&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ•°ç»„ä¸­æœ‰çŠ¶æ€å, åˆ™åªä¼šåœ¨æ•°ç»„ä¸­çš„çŠ¶æ€æ›´æ–°æ—¶è°ƒç”¨</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;NameWillUpdate&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- æ¨ªå‘è‡ªé€‚åº” -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Chubby-Duner/blog/edit/master/docs/Reactç¬”è®°/02.Hooks/01.hooks.md" target="_blank" rel="noopener noreferrer">åœ¨çº¿ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/blog/tags/?tag=React" title="æ ‡ç­¾">#React</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2021/11/14, 07:48:46</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/b90a4c/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Reactç»„ä»¶ä¸‰å¤§æ ¸å¿ƒå±æ€§ - Refs</div></a> <a href="/blog/pages/b5468e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">React17æ–°ç‰ˆæœ¬æ¦‚å¿µ</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/blog/pages/b90a4c/" class="prev">Reactç»„ä»¶ä¸‰å¤§æ ¸å¿ƒå±æ€§ - Refs</a></span> <span class="next"><a href="/blog/pages/b5468e/">React17æ–°ç‰ˆæœ¬æ¦‚å¿µ</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/75a695/"><div>æ¯›ç»ç’ƒæ•ˆæœ</div></a> <span>11-23</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/17c8ce/"><div>svgåŸºæœ¬ç»˜åˆ¶</div></a> <span>11-23</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/d1b925/"><div>æ»‘åŠ¨ç™»å½•ç•Œé¢</div></a> <span>11-23</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1262426172@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Chubby-Duner" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://juejin.cn/user/1601308361494712" title="æ˜é‡‘" target="_blank" class="iconfont icon-juejin"></a></div> <div class="footer-text"><span>ğŸ–¥ï¸ </span></div> <div class="footer-info"><p>
         Â© 2021 å°èƒ–å¢©er ğŸ’Œ
         <a href="https://beian.miit.gov.cn" target="_blank">ç²¤ICPå¤‡2021158933å·</a>
         ğŸ›€ Theme by ğŸ’
          <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a></p></div></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">Ã—</i> <div><!-- å›ºå®š160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/blog/assets/js/app.7c85cea3.js" defer></script><script src="/blog/assets/js/2.72fc9297.js" defer></script><script src="/blog/assets/js/3.08858e57.js" defer></script><script src="/blog/assets/js/83.f102a97f.js" defer></script>
  </body>
</html>